<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task 08 - Lyric Word Cloud</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.2/src/wordcloud2.min.js"></script>
    <style>
        body { background: #111827; color: white; font-family: sans-serif; }
        .cloud-area { background: #1f2937; border-radius: 15px; min-height: 400px; }
    </style>
</head>
<body class="p-5">
    <div class="max-w-2xl mx-auto">
        <h1 class="text-2xl font-bold text-center mb-5 text-blue-400">Song Lyric Word Cloud</h1>
        
        <div class="grid grid-cols-2 gap-2 mb-5">
            <input id="artist" type="text" placeholder="Artist Name" class="p-3 rounded bg-gray-800 border border-gray-700">
            <input id="song" type="text" placeholder="Song Title" class="p-3 rounded bg-gray-800 border border-gray-700">
        </div>
        
        <button onclick="getLyrics()" class="w-full bg-blue-600 p-3 rounded font-bold hover:bg-blue-700">
            GENERATE WORD CLOUD
        </button>

        <p id="status" class="mt-3 text-sm text-gray-400 text-center"></p>

        <div class="cloud-area mt-5 flex items-center justify-center">
            <canvas id="myCanvas" width="600" height="400"></canvas>
        </div>
    </div>

    <script>
        async function getLyrics() {
            const artist = document.getElementById('artist').value;
            const song = document.getElementById('song').value;
            const status = document.getElementById('status');
            
            if(!artist || !song) return alert("Fill both fields");

            status.innerText = "Searching for lyrics...";
            
            try {
                // Fetching lyrics from a public API
                const res = await fetch(`https://api.lyrics.ovh/v1/${artist}/${song}`);
                const data = await res.json();
                
                if(!data.lyrics) {
                    status.innerText = "Lyrics not found. Try another song.";
                    return;
                }

                status.innerText = "Lyrics found! Creating cloud...";

                // Simple Human Logic: Count word frequency
                const words = data.lyrics.toLowerCase()
                    .replace(/[^\w\s]/g, "") // remove punctuation
                    .split(/\s+/)            // split into words
                    .filter(w => w.length > 3); // skip small words

                const counts = {};
                words.forEach(w => counts[w] = (counts[w] || 0) + 1);

                // Format for the WordCloud library
                const list = Object.entries(counts).map(([text, count]) => [text, count * 7]);

                // Generate the cloud
                WordCloud(document.getElementById('myCanvas'), { 
                    list: list,
                    backgroundColor: '#1f2937',
                    color: 'random-light'
                });

            } catch (e) {
                status.innerText = "Error fetching lyrics.";
            }
        }
    </script>
</body>
</html>
